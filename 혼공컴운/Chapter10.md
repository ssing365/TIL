### 10-1 프로세스 개요

### **프로세스** : 실행 중인 프로그램

- 프로그램은 실행되기 전까지 그저 보조기억장치의 데이터 덩어리인데, 메모리에 적재하고 실행하는 순간 프로그램은 프로세스가 된다.
    
    → **“프로세스가 생성되었다”** 고 표현
    

### 프로세스 구분

- **포그라운드 프로세스** : 사용자가 보는 앞에서 실행되는 프로세스
- **백그라운드 프로세스** : 사용자가 보지 못하는 뒤에서 실행되는 프로세스
    - 사용자와 상호작용할 수 있는 백그라운드 프로세스도 있고
    - 사용자와 상호작용하지 않고 묵묵히 정해진 일만 수행하는 백그라운드 프로세스도 있다. → **데몬**(리눅스/유닉스), **서비스**(윈도우)

### 프로세스 제어 블록(PCB)

![스크린샷 2025-03-28 오후 11.53.10.jpg](./images/chapter10/pcb.jpg)

: **프로세스가 생성**되었을 때 **커널영역에 생성되는,** **프로세스의 정보**를 담고 있는 자료구조.

![스크린샷 2025-03-28 오후 11.48.53.jpg](./images/chapter10/timer.jpg)

- 운영체제는 빠르게 번갈아 수행되는 프로세스의 실행 순서를 관리해야한다. 이를 위해 PCB를 이용한다.
- **타이머(타임아웃) 인터럽트**
    - 클럭 신호를 발생시키는 장치에 의해 주기적으로 발생하는 하드웨어 인터럽트.
    - 이게 발생하면 프로세스는 자신의 차례를 양보하고 다음 차례까지 기다린다.

![스크린샷 2025-03-28 오후 11.53.03.jpg](./images/chapter10/pcbs.jpg)

- PCB에 담기는 대표 정보
    - 프로세스 ID
        - 프로세스를 식별하는 고유번호
    - 레지스터 값
        - 이전까지 사용했던 레지스터의 중간값을 복원하기 위해(**실행을 재개하기 위해**), 프로그램 카운터를 비롯한 레지스터 값 저장
        - 프로세스 상태
            - ex) CPU사용을 기다리는 상태, CPU이용중인 상태, 입출력장치 사용을 기다리는 상태 등
        - CPU 스케줄링 정보
            - 프로세스가 언제 어떤 순서로 CPU를 할당받을지에 대한 정보
        - 메모리 관리 정보
            - 프로세스가 적재된 메모리 주소를 알 수 있는 정보들
        - 사용한 파일과 입출력장치 목록
            - 어떤 파일을 열었는지, 어떤 입출력장치가 이 프로세스에 할당되었는지 등

### 문맥 교환

![스크린샷 2025-03-29 오전 12.09.33.jpg](./images/chapter10/context.jpg)

- **문맥** : 하나의 **프로세스 수행을 재개하기 위해 기억해야 할 정보**(중간 정보). PCB에 담기는 프로세스 정보들이라고 봐도 무방
- **문맥 교환** : **기존 프로세스의 문맥을 PCB에 백업**하고, 새로운 프로세스를 실행하기 위해 **문맥을 PCB로부터 복구하여 새로운 프로세스를 실행**하는 것.

### 프로세스의 메모리 영역

> ❓ 프로세스가 생성되면 커널영역에는 PCB가 생성된다. 그렇다면 사용자 영역에는 프로세스가 어떻게 배치될까?
> 

<aside>

❗️매우 중요

- 하나의 프로세스는 사용자 영역에 크게 **코드 영역, 데이터 영역, 힙 영역, 스택 영역**으로 나뉘어 저장된다.
</aside>

### 코드 영역

- 실행할 수 있는 코드, 즉 **기계어로 이루어진 명령어가 저장되는 공간**
- 쓰기 금지. read-only 공간

### 데이터 영역

- **프로그램이 실행되는 동안 유지할 데이터가 저장되는 공간**
    - 이런 데이터로는 전역변수가 있다.
    - 전역변수 : 프로그램 전체에서 접근 가능한 변수. 프로그램이 실행되는 동안 유지됨

### 힙 영역

- **프로그래머가 직접 할당할 수 있는 저장공간**
    - 프로그래밍 과정에서 힙 영역에 메모리 공간을 할당했다면 언젠가 그 공간을 반환해야한다.
    - 그렇지 않으면 메모리 누수(낭비) 발생
    - **가비지 콜렉션** : 자동으로 힙 영역 메모리 공간을 반환하는 기능

### 스택 영역

- **데이터를 일시적으로 저장하는 공간**
- 데이터 영역에 담기는 값과 달리, 잠깐 쓰다가 말 값들이 저장되는 공간
    - 이러한 데이터로 함수 실행이 끝나면 사라지는 **매개변수, 지역변수**가 있다.
- 일시적으로 저장할 데이터는 스택 영역에 PUSH되고, 더 이상 필요하지 않은 데이터는 POP됨으로써 스택 영역에서 사라짐.

![스크린샷 2025-03-29 오전 12.20.05.jpg](./images/chapter10/memory.jpg)

- 코드 영역과 데이터 영역은 그 데이터 크기가 변하지 않으므로 **정적 할당 영역**이라고 부른다.
- 스택 영역과 힙 영역은 실시간으로 크기가 변할 수 있기 때문에 **동적 할당 영역**이라고 부른다.
    - 힙 영역은 낮은 주소에서 높은 주소로,
    - 스택 영역은 높은 주소에서 낮은 주소로 할당되어 주소 겹침을 방지한다.